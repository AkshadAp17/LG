# Deployment Instructions for Render

## Prerequisites
1. MongoDB Atlas account and connection string
2. Cloudinary account (for file uploads)
3. SendGrid account (for emails)

## Required Environment Variables

Set these environment variables in your Render dashboard:

### Database
- `MONGODB_URI`: Your MongoDB Atlas connection string

### Authentication
- `JWT_SECRET`: Random string for JWT tokens (auto-generated by Render)
- `SESSION_SECRET`: Random string for sessions (auto-generated by Render)

### Email Service
- `SENDGRID_API_KEY`: Your SendGrid API key

### File Upload Service
- `CLOUDINARY_CLOUD_NAME`: Your Cloudinary cloud name
- `CLOUDINARY_API_KEY`: Your Cloudinary API key
- `CLOUDINARY_API_SECRET`: Your Cloudinary API secret

### System
- `NODE_ENV`: Set to "production"

## Deployment Steps

### Option 1: Using render.yaml (Recommended)
1. Connect your GitHub repository to Render
2. The `render.yaml` file will automatically configure the service
3. Set the required environment variables in the Render dashboard
4. Deploy!

### Option 2: Manual Setup
1. Create a new Web Service on Render
2. Connect your GitHub repository
3. Set the following:
   - **Build Command**: `npm install && npm run build`
   - **Start Command**: `npm start`
   - **Environment**: Node.js
4. Add all the environment variables listed above
5. Deploy the service

### Option 3: Docker Deployment
1. Use the provided Dockerfile
2. Build and push to a container registry
3. Deploy using Render's Docker support

## Database Setup

Your MongoDB connection string should look like:
```
mongodb+srv://username:password@cluster.mongodb.net/legal-case-management?retryWrites=true&w=majority
```

The application will automatically:
- Connect to MongoDB
- Seed the database with initial data (if empty)
- Create necessary collections

## File Storage

The app uses Cloudinary for file uploads. Make sure to:
1. Create a Cloudinary account
2. Get your cloud name, API key, and API secret
3. Add them to your environment variables

## Post-Deployment

After successful deployment:
1. Visit your app URL
2. Register a new account or use seeded accounts
3. Test all functionality including file uploads and emails

## Troubleshooting

If deployment fails:
1. Check the build logs in Render dashboard
2. Ensure all environment variables are set correctly
3. Verify MongoDB connection string is valid
4. Check that your repository has all required files

## Production Considerations

1. **Security**: The app includes proper authentication and authorization
2. **File Uploads**: Uses Cloudinary for secure file storage
3. **Email**: Uses SendGrid for reliable email delivery
4. **Database**: Uses MongoDB Atlas for scalable database hosting
5. **Sessions**: Uses secure session management with proper secrets